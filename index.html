<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATSEP Toolbox</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1a202c">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="calculator-card">
        <div class="tab-nav">
            <button class="tab-btn active" data-tab="qnh-panel">QNH</button>
            <button class="tab-btn" data-tab="range-panel">RANGE</button>
            <button class="tab-btn" data-tab="dest-panel">DEST</button>
        </div>

        <!-- Global Settings (Hidden by default, used by JS) -->
        <select id="coord_fmt" class="save-val" style="display:none">
            <option value="DD">DD</option>
            <option value="DDM">DDM</option>
            <option value="DMS">DMS</option>
        </select>

        <!-- QNH Panel -->
        <div id="qnh-panel" class="tab-panel active">
            <h1 class="text-3xl font-bold mb-2 app-title">QNH Correction</h1>

            <div class="mb-4 text-left">
                <label for="pressureInput" class="block text-sm font-medium text-gray-300">Pressure Setting
                    (QNH)</label>
                <div class="flex items-center space-x-2">
                    <input type="number" id="pressureInput" class="input-field flex-grow save-val"
                        placeholder="e.g., 1005" inputmode="decimal" aria-label="Pressure value" required min="0">
                    <select id="pressureUnit" class="input-field w-auto text-sm save-val"
                        aria-label="Select pressure unit">
                        <option value="hPa">hPa</option>
                        <option value="inHg">inHg</option>
                    </select>
                </div>
            </div>

            <div class="mb-4 text-left">
                <label for="correctionUnit" class="block text-sm font-medium text-gray-300">Display Units</label>
                <select id="correctionUnit" class="input-field w-full text-sm save-val"
                    aria-label="Select correction output unit">
                    <option value="FL">FL (Flight Level)</option>
                    <option value="feet">Feet</option>
                    <option value="meters">Meters</option>
                </select>
            </div>

            <button id="calculateButton" type="button" class="calculate-btn w-full mt-6">Calculate Correction</button>

            <div id="resultDisplay" class="result-box mt-6" role="status" aria-live="polite">
                Enter pressure to get the correction.
            </div>
        </div>

        <!-- Range and BearingPanel -->
        <div id="range-panel" class="tab-panel">
            <h1 class="text-3xl font-bold mb-2 app-title">Range and Bearing Calculator</h1>
            <div class="label-row">
                <span>Coordinates</span>
                <div>
                    <select id="range_fmt_sel" class="clean-select save-val">
                        <option value="DD">DD</option>
                        <option value="DDM">DDM</option>
                        <option value="DMS">DMS</option>
                    </select>
                    <select id="range_unit_type" class="clean-select save-val">
                        <option value="NM">NM</option>
                        <option value="M">M</option>
                    </select>
                </div>
            </div>

            <div id="r_origin_inputs" class="input-group" style="margin-bottom: 0.5rem;"></div>

            <div class="swap-container">
                <button id="swapRangeBtn" class="swap-icon-btn" type="button" title="Swap Origin and Destination"
                    aria-label="Swap coordinates">
                    â‡…
                </button>
            </div>

            <div id="r_dest_inputs" class="input-group"></div>

            <button class="calculate-btn">Calculate Vectors</button>

            <div class="result-container">
                <button class="copy-btn" data-target="range_res">ðŸ“‹</button>
                <div id="range_res" class="result-box">---</div>
            </div>
        </div>

        <!-- Destination Panel -->
        <div id="dest-panel" class="tab-panel">
            <h1 class="text-3xl font-bold mb-2 app-title">Destination Calculator</h1>
            <div class="label-row">
                <span>Origin Point</span>
                <select id="dest_fmt_sel" class="clean-select save-val">
                    <option value="DD">DD</option>
                    <option value="DDM">DDM</option>
                    <option value="DMS">DMS</option>
                </select>
            </div>

            <div id="d_start_inputs" class="input-group"></div>

            <div class="input-group">
                <div class="label-row">
                    <span>Vector Input</span>
                    <select id="d_unit" class="clean-select save-val">
                        <option value="NM">NM</option>
                        <option value="M">M</option>
                    </select>
                </div>
                <div class="input-row-responsive">
                    <div style="flex:1">
                        <small style="display:block; margin-bottom:4px; opacity:0.7;">Range</small>
                        <input type="number" id="d_dist" class="num-input w-full save-val" placeholder="0.0"
                            inputmode="decimal" min="0" step="any">
                    </div>
                    <div style="flex:1">
                        <small style="display:block; margin-bottom:4px; opacity:0.7;">Bearing (Â°T)</small>
                        <input type="number" id="d_brng" class="num-input w-full save-val" placeholder="360"
                            inputmode="decimal" min="0" max="360" step="any">
                    </div>
                </div>
            </div>

            <button class="calculate-btn">Project Destination</button>

            <div class="result-container">
                <button class="copy-btn" data-target="dest_res">ðŸ“‹</button>
                <div id="dest_res" class="result-box">---</div>
            </div>
        </div>

        <div class="ducky-mascot" title="Ducky: Ducky is here to help! Quack!">ðŸ¦†</div>
    </div>

    <!-- Computation Modules -->
    <script src="Vicenty.js"></script>
    <script src="QNH.js"></script>

    <!-- Application Logic -->
    <script src="ui.js"></script>
    <script src="app.js"></script>
</body>

</html>